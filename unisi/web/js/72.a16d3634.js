"use strict";(globalThis["webpackChunkuniqua"]=globalThis["webpackChunkuniqua"]||[]).push([[72],{72:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var d=s(1758),l=s(8790);const o={key:0,id:"header"};function i(e,t,s,i,r,a){return(0,d.uX)(),(0,d.CE)("div",{ref:"graph",style:(0,l.Tr)(s.styleSize),id:"graph"},[(0,d.Lk)("div",null,["_"!=s.data.name[0]?((0,d.uX)(),(0,d.CE)("div",o,(0,l.v_)(s.data.name),1)):(0,d.Q3)("",!0)])],4)}s(7225),s(8743),s(2858),s(2071),s(5520),s(2775),s(6203),s(7781),s(4739),s(8499);var r=s(3952),a=s(411);let n="#091159",g={enableEdgeEvents:!0,hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!0,enableEdgeClickEvents:!0,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!0,enableEdgeHovering:!0,allowInvalidContainer:!0,enableEdgeClickEvents:!0,enableEdgeHoverEvents:!0,defaultNodeColor:"#FCA072",defaultNodeType:"circle",defaultEdgeColor:"#888",defaultEdgeType:"arrow",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#00838F",attribute:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,animationsTime:1e3,borderSize:2,outerBorderSize:3,defaultNodeOuterBorderColor:"rgb(236, 81, 72)",edgeHoverHighlightNodes:"circle",sideMargin:1,edgeHoverColor:"edge",defaultEdgeHoverColor:"#062646",edgeHoverSizeRatio:1,edgeHoverExtremities:!0,scalingMode:"outside",nodeProgramClasses:{image:null}};const h={name:"sgraph",props:{data:{type:Object,required:!0},pdata:{type:Object,required:!0},styleSize:String},data(){return{Dark:a.A,s:null,state:{searchQuery:""},selectedNodes:[],selectedEdges:[],graph:null,fa2start:null,fa2stop:null,fa2run:null,Sigma:null,MultiDirectedGraph:null,FA2Layout:null,forceAtlas2:null,NodeImageProgram:null}},methods:{sendMessage(e,t){(0,r.tN)([this.pdata["name"],this.data["name"],e,t])},refresh(){if(!this.graph)return;let e=this.graph();const t=this.forceAtlas2.inferSettings(e);let s=new this.FA2Layout(e,{settings:t});r.Rl&&console.log("refresh graph",this.data.name,this.pdata.name),s.isRunning()||(s.start(),setTimeout((function(){s.stop()}),1e3))},setSelectedEdges(e){this.s.selectEdges(e)},setSearchQuery(e){if(e){const t=e.toLowerCase(),s=this.graph().nodes().map((e=>({id:e,label:this.graph().getNodeAttribute(e,"label")}))).filter((({label:e})=>e.toLowerCase().includes(t)));if(1===s.length&&s[0].label===e){this.state.selectedNode=s[0].id,this.state.suggestions=void 0;const e=this.s.getNodeDisplayData(this.state.selectedNode);this.s.getCamera().animate(e,{duration:500})}else this.state.selectedNode=void 0,this.state.suggestions=new Set(s.map((({id:e})=>e)))}else this.state.selectedNode=void 0,this.state.suggestions=void 0;this.s.refresh()},load(e){if(!this.graph)return;let t=e.value;this.selectedNodes=t.nodes?t.nodes.map((e=>String(e))):[],this.selectedEdges=t.edges?t.edges.map((e=>String(e))):[];let s=e.sizing,d=e.nodes,l=this.graph(),o=[],i=[],r=new Map;for(let e=0;e<d.length;e++){if(!d[e])continue;let t=Object.assign({},d[e]);void 0==t.id&&(t.id=e),void 0!=t.name&&(t.label=t.name);let s={key:String(t.id),attributes:t};t.size=t.size?t.size:10,o.push(s),r.set(t.id,e);let i=l._nodes.get(s.key);i?(t.x=i.attributes.x,t.y=i.attributes.y):(t.x=Math.random(),t.y=Math.random()),this.selectedNodes.includes(s.key)&&(t.highlighted=!0)}let a=[],h=new Map,u=Array(o.length).fill(0);for(let t=0;t<e.edges.length;t++){let d=Object.assign({},e.edges[t]),l=r.get(d.source),o=r.get(d.target);if(void 0==l||void 0==o)continue;if(void 0==d.id&&(d.id=t),d.name&&(d.label=d.name),d.key=String(d.id),i.push(d),s){"in"!=s&&(o=r.get(d.source),l=r.get(d.target)),u[o]++,h.has(o)?h.get(o).push(l):h.set(o,[l]);let e=a.indexOf(l),t=a.indexOf(o);if(-1==e&&(e=a.length,a.push(l)),-1==t&&(t=a.length,a.push(o)),t<e){let s=a[e];a[e]=a[t],a[t]=s}}let c=d.attributes;c||(c={},d.attributes=c),c.id=d.id,c.size=d.size?d.size:5,this.selectedEdges.includes(d.key)?(c.ocolor=c.color?c.color:g.defaultEdgeColor,c.color=n):d.color&&(c.color=d.color),d.label&&(c.label=d.label)}if(s)for(let e=0;e<a.length;e++){let t=a[e];if(h.has(t))for(let e of h.get(t))u[t]+=u[e];o[t].attributes.size=10+u[t]}l.clear(),l.import({nodes:o,edges:i}),this.refresh()}},computed:{value(){if(!this.graph)return{nodes:[],edges:[]};let e=this.graph(),t=this.selectedNodes.map((t=>e._nodes.get(t).attributes.id)),s=this.selectedEdges.map((t=>e._edges.get(t).attributes.id));return{nodes:t,edges:s}}},watch:{data:{handler(e,t){r.Rl&&console.log("data update",this.data.name,this.pdata.name),this.load(e)},deep:!0},"Dark.isActive":function(e){this.s&&(this.s.settings.labelColor.color=e?"#00838F":"#000",this.s.refresh())}},updated(){this.s&&(this.s.refresh(),r.Rl&&console.log("updated",this.data.name,this.pdata.name))},mounted(){Promise.all([Promise.all([s.e(121),s.e(324)]).then(s.bind(s,6747)),Promise.all([s.e(121),s.e(324)]).then(s.t.bind(s,8911,23)),Promise.all([s.e(121),s.e(324)]).then(s.t.bind(s,3668,23)),Promise.all([s.e(121),s.e(324)]).then(s.t.bind(s,1944,23)),Promise.all([s.e(121),s.e(324)]).then(s.bind(s,5793))]).then((([e,t,s,d,l])=>{this.Sigma=e.default,this.MultiDirectedGraph=t.default.MultiDirectedGraph,this.MultiDirectedGraph||console.error("Error: MultiDirectedGraph not found in graphologyModule.default"),this.FA2Layout=s.default,this.forceAtlas2=d.default,this.NodeImageProgram=l.NodeImageProgram,g.nodeProgramClasses.image=this.NodeImageProgram;let o=new this.MultiDirectedGraph;this.graph=()=>o;let i=this.$refs.graph;this.s=new this.Sigma(o,i,g);let h=this.s;var u=this;function c(e){e?u.state.hoveredNeighbors=new Set(o.neighbors(e)):(u.state.hoveredNode=void 0,u.state.hoveredNeighbors=void 0),h.refresh()}function f(e,t=n){let s=o.getEdgeAttributes(e);s.color!=t&&(s.ocolor||(s.ocolor=s.color?s.color:g.defaultEdgeColor),o.setEdgeAttribute(e,"color",t))}function b(e,t=n){let s=o.getEdgeAttributes(e);if(s.color==t){let t=o.getEdgeAttribute(e,"ocolor");o.setEdgeAttribute(e,"color",t)}}this.s.settings.labelColor.color=a.A.isActive?"#00838F":"#000",h.on("clickNode",(function(e){let t=e.node;if(!r.Zp.shiftKey){for(let e of u.selectedEdges)b(e);u.selectedEdges=[]}if(u.selectedNodes.includes(t))if(o.setNodeAttribute(t,"highlighted",!1),r.Zp.shiftKey){let e=u.selectedNodes.indexOf(t);-1!=e&&u.selectedNodes.splice(e,1)}else u.selectedNodes=[];else{if(!r.Zp.shiftKey&&u.selectedNodes.length>0){for(let e of u.selectedNodes)o.setNodeAttribute(e,"highlighted",!1);u.selectedNodes=[]}o.setNodeAttribute(t,"highlighted",!0),u.selectedNodes.push(t)}h.refresh(),u.sendMessage("changed",u.value)})),h.on("clickEdge",(function({edge:e}){if(!r.Zp.shiftKey){for(let e of u.selectedNodes)o.setNodeAttribute(e,"highlighted",!1);u.selectedNodes=[]}if(u.selectedEdges.includes(e))if(b(e),r.Zp.shiftKey){let t=u.selectedEdges.indexOf(e);-1!=t&&u.selectedEdges.splice(t,1)}else u.selectedEdges=[];else{if(!r.Zp.shiftKey&&u.selectedEdges.length>0){for(let e of u.selectedEdges)b(e);u.selectedEdges=[]}f(e),u.selectedEdges.push(e)}h.refresh(),u.sendMessage("changed",u.value)})),h.on("enterNode",(function({node:e}){for(let t of o.edgeEntries())t.target==e?f(t.edge,"#808000"):t.source==e&&f(t.edge,"#2F4F4F");c(e)})),h.on("leaveNode",(function({node:e}){for(let t of o.edgeEntries())t.target==e?u.selectedEdges.includes(t.edge)?o.setEdgeAttribute(t.edge,"color",n):b(t.edge,"#808000"):t.source==e&&(u.selectedEdges.includes(t.edge)?o.setEdgeAttribute(t.edge,"color",n):b(t.edge,"#2F4F4F"));c(void 0)})),h.on("enterEdge",(function({edge:e}){u.selectedEdges.includes(e)||f(e)})),h.on("leaveEdge",(function({edge:e}){u.selectedEdges.includes(e)||b(e)}));const p=new ResizeObserver((e=>h.refresh()));p.observe(i);let m=null,E=!1;h.on("downNode",(e=>{E=!0,m=e.node,o.setNodeAttribute(m,"highlighted",!0)})),h.getMouseCaptor().on("mousemovebody",(e=>{if(!E||!m)return;const t=h.viewportToGraph(e);o.setNodeAttribute(m,"x",t.x),o.setNodeAttribute(m,"y",t.y),e.preventSigmaDefault(),e.original.preventDefault(),e.original.stopPropagation()})),h.getMouseCaptor().on("mouseup",(()=>{m&&o.removeNodeAttribute(m,"highlighted"),E=!1,m=null})),h.getMouseCaptor().on("mousedown",(()=>{h.getCustomBBox()||h.setCustomBBox(h.getBBox())})),u.load(u.data)})).catch((e=>{console.error("Error loading sigma.js and related libraries:",e)}))}};var u=s(2807);const c=(0,u.A)(h,[["render",i],["__scopeId","data-v-a6b7e7b0"]]),f=c}}]);